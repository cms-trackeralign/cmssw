LFS: $CMSSW_BASE/src/UnitTest
name: test_yaml_new
alignments:
    unitTest:
        color: 1
        globaltag: auto:phase1_2017_realistic
        style: 2101
        title: unit test
    prompt:
        color: 600
        globaltag: auto:run3_data_promptlike
        style: 2101
        title: prompt
    legacy:
        color: 418
        globaltag: auto:run2_data
        style: 2101
        title: legacy
    unitTestJetHT:
        color: 1
        globaltag: auto:run2_data
        style: 2101
        title: Unit test

validations:
    DMR:
        merge:
            testUnits:
                methods:
                - mean
                - rms
                curves:
                - plain
                legendoptions:
                - mean
                - rms
                singles:
                - testUnits
                usefit: true
                minimum: 15
                customrighttitle: IOV

        single:
            testUnits:
                IOV:
                - 317655
                alignments:
                - unitTest
                trackcollection: generalTracks
                vertexcollection: offlinePrimaryVertices
                maxevents: 1
                maxtracks: 1
    PV:
        merge:
            testUnits:
                singles:
                - testUnits
                doMaps: true
                stdResiduals: true
                autoLimits: false

        single:
            testUnits:
                IOV:
                - 1
                alignments:
                - unitTest
                trackcollection: generalTracks
                vertexcollection: offlinePrimaryVertices
                maxevents: 10
                isda: true
                ismc: true
    SplitV:
        merge:
            testUnits:
                singles:
                - testUnits

        single:
            testUnits:
                IOV:
                - 1
                alignments:
                - unitTest
                trackcollection: generalTracks
                HLTSelection: False
                triggerBits: HLT_*
                maxevents: 10
    GCP:
        GCPdetUnits:
            levels: DetUnit
            plotPng: true
        compare:
            GCPdetUnits:
                legacyVSprompt:
                    reference: legacy
                    compared: prompt
                    IOVpairs:
                    - [274094, 274094]
    JetHT:
        single:
            testJob:
                alignments:
                - unitTestJetHT
                trackCollection: ALCARECOTkAlMinBias
                maxevents: 10
                iovListFile: CMSSW_BASE/src/Alignment/OfflineValidation/data/lumiPerRun_Run2.txt

            testMC:
                alignments:
                - unitTest
                trackCollection: ALCARECOTkAlMinBias
                mc: True
                maxevents: 10
        merge:
            testJob:
                singles:
                - testJob
                alignments:
                - unitTestJetHT
            testMC:
                singles:
                - testMC
                alignments:
                - unitTest
        plot:
            testJob:
                merges:
                - testJob
                alignments:
                - unitTestJetHT
                jethtplot:
                    drawProfiles:
                        drawDzErrorVsPt: true
                        drawDxyErrorVsPt: true
                    drawHistograms:
                        drawDz: true
                        drawDxy: true
            testMC:
                merges:
                - testMC
                alignments:
                - unitTest
                jethtplot:
                    drawProfiles:
                        drawDzErrorVsPt: true
                        drawDxyErrorVsPt: true
                    drawHistograms:
                        drawDz: true
                        drawDxy: true
